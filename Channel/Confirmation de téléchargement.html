<!--  -----------------------------------------------------  -->
<!--  Copyright 2005-2014 Acer Cloud Technology, Inc.        -->
<!--  All Rights Reserved.                                   -->
<!--                                                         -->
<!--  This software contains confidential information and    -->
<!--  trade secrets of Acer Cloud Technology, Inc.           -->
<!--  Use, disclosure or reproduction is prohibited without  -->
<!--  the prior express written permission of Acer Cloud     -->
<!--  Technology, Inc.                                       -->
<!--  -----------------------------------------------------  -->
<!--  -----------------------------------------------------  -->
<!--  Copyright 2005-2014 Acer Cloud Technology, Inc.        -->
<!--  All Rights Reserved.                                   -->
<!--                                                         -->
<!--  This software contains confidential information and    -->
<!--  trade secrets of Acer Cloud Technology, Inc.           -->
<!--  Use, disclosure or reproduction is prohibited without  -->
<!--  the prior express written permission of Acer Cloud     -->
<!--  Technology, Inc.                                       -->
<!--  -----------------------------------------------------  -->
<!--  -----------------------------------------------------  -->
<!--  Copyright 2005-2014 Acer Cloud Technology, Inc.        -->
<!--  All Rights Reserved.                                   -->
<!--                                                         -->
<!--  This software contains confidential information and    -->
<!--  trade secrets of Acer Cloud Technology, Inc.           -->
<!--  Use, disclosure or reproduction is prohibited without  -->
<!--  the prior express written permission of Acer Cloud     -->
<!--  Technology, Inc.                                       -->
<!--  -----------------------------------------------------  -->
<!--?xml version="1.0" encoding="utf-8"?-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><!-- Flush buffer before setting locale to ensure encoding is preserved --><!-- Title name --><!-- Controller image and message --><!-- Release Date --><!-- Number of players --><!-- Title Rating Images --><!--  -----------------------------------------------------  --><!--  Copyright 2005-2014 Acer Cloud Technology, Inc.        --><!--  All Rights Reserved.                                   --><!--                                                         --><!--  This software contains confidential information and    --><!--  trade secrets of Acer Cloud Technology, Inc.           --><!--  Use, disclosure or reproduction is prohibited without  --><!--  the prior express written permission of Acer Cloud     --><!--  Technology, Inc.                                       --><!--  -----------------------------------------------------  --><head><script type="text/JavaScript">
<!--

function getSCAUserStatus(){
  var isSilverSCA = "";
  var isGoldSCA = "";
  if(ecSupportsSession()){
    isSilverSCA = ec.getSessionValue("silverStatus");
            isGoldSCA = ec.getSessionValue("goldStatus");
  }
  if(isGoldSCA == "ACTIVATED"){
      return "SCAGOLD";
  }else if(isSilverSCA == "ACTIVATED"){
      return "SCASILVER";
  }else{
      return "";
  }
}
function getSCAUserDiscountType(){
  var status = getSCAUserStatus();
  if(status == "SCAGOLD") {
      return ec.getSessionValue("goldDiscountType");
  }else if(status == "SCASILVER"){
      return ec.getSessionValue("silverDiscountType");
  }else{
      return "";
  }
}

//-->
</script>
<!--  -----------------------------------------------------  -->
<!--  Copyright 2005-2014 Acer Cloud Technology, Inc.        -->
<!--  All Rights Reserved.                                   -->
<!--                                                         -->
<!--  This software contains confidential information and    -->
<!--  trade secrets of Acer Cloud Technology, Inc.           -->
<!--  Use, disclosure or reproduction is prohibited without  -->
<!--  the prior express written permission of Acer Cloud     -->
<!--  Technology, Inc.                                       -->
<!--  -----------------------------------------------------  -->
<script type="text/JavaScript">
<!--


function getICRUserStatus() {
    var status ;

    if ( ecSupportsSession() ){
        status =  ec.getSessionValue("icrStatus");

        if ( status == "ACTIVATED" || status == "COMPLETE" || status == "DISABLED" ){
            return status ;
        }
    }

    return "DISABLED";
}

function getICRUserDiscountType(){
    var status;
    if ( ecSupportsSession()){
        status=getICRUserStatus();
        if(status == "ACTIVATED"){
            return ec.getSessionValue("icrDiscountType");
        }
    }
    return "";
}



function isICRExpired(){
    
        if(ecSupportsSession()){
            if((ec.getSessionValue("icrStatus") == "ACTIVATED") &&
               ('' == '') &&
               ('' == "FC/NES") && 
               (parseInt('') == 500)){
                trace("ICR is expired");
                return true;
            }else{
                trace("ICR is not expired");
                return false;
            }
        }else{
            trace("not support ec session");
            return true;
        }
        
}
//-->
</script>



  <!--  -----------------------------------------------------  -->
<!--  Copyright 2005-2014 Acer Cloud Technology, Inc.        -->
<!--  All Rights Reserved.                                   -->
<!--                                                         -->
<!--  This software contains confidential information and    -->
<!--  trade secrets of Acer Cloud Technology, Inc.           -->
<!--  Use, disclosure or reproduction is prohibited without  -->
<!--  the prior express written permission of Acer Cloud     -->
<!--  Technology, Inc.                                       -->
<!--  -----------------------------------------------------  -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="shortcut icon" href="https://oss-auth.shop.wii.com/oss/favicon.ico"> 
<link href="Confirmation%20de%20t%C3%A9l%C3%A9chargement_fichiers/oss.css" rel="stylesheet" type="text/css">
<link href="Confirmation%20de%20t%C3%A9l%C3%A9chargement_fichiers/error.css" rel="stylesheet" type="text/css">
<script type="text/JavaScript">
<!--
	var ecCheck = false;
	var errorCheck = false;
	var buttonsCheck = false;
	var imagesCheck = false;
	var soundCheck = false;
	var shopCheck = false;
	var ossCheck = false;
//-->
</script>

<script language="JavaScript" src="Confirmation%20de%20t%C3%A9l%C3%A9chargement_fichiers/ec.js"></script>
<script language="JavaScript" src="Confirmation%20de%20t%C3%A9l%C3%A9chargement_fichiers/error.js"></script>
<script language="JavaScript" src="Confirmation%20de%20t%C3%A9l%C3%A9chargement_fichiers/buttons.js"></script>
<script language="JavaScript" src="Confirmation%20de%20t%C3%A9l%C3%A9chargement_fichiers/images.js"></script>
<script language="JavaScript" src="Confirmation%20de%20t%C3%A9l%C3%A9chargement_fichiers/sound.js"></script>
<script language="JavaScript" src="Confirmation%20de%20t%C3%A9l%C3%A9chargement_fichiers/shop.js"></script>
<script language="JavaScript" src="Confirmation%20de%20t%C3%A9l%C3%A9chargement_fichiers/oss.js"></script>

<script type="text/JavaScript">
<!--
var testMode = 'false';

function getMethod()
{
	return 'GET';	
}

function getPostParams()
{
    var params = "";    
   
   return params;
}

function isConnectingPage()
{
    var isConnecting = '';
    return (isConnecting == 'true');
}

function initPageCommon()
{
	var isShoppingManualEnabled = "true";
    	if (ecSupportsSession()) {
        	isShoppingManualEnabled = ec.getSessionValue("isShopManEnabled");
    	}
    
    	if (isShoppingManualEnabled != "true") {
    		hideElement("tophelpshadow");
	    	hideElement("help");
    	}
    	
	var ecsUrl = null;
	var iasUrl = null;
	var ccsUrl = null;
	var ucsUrl = null;
	var currBalance = null;

    // js file loading check
	var shopErrCheck = new wiiShop();
	if (shopErrCheck != null && "error" in shopErrCheck) {
		// shopErrCheck.error(209620, 1);
		if (!ecCheck) {
			shopErrCheck.error(209620, 1);
		} else if (!errorCheck) {
			shopErrCheck.error(209620, 1);
		} else if (!buttonsCheck) {
			shopErrCheck.error(209620, 1);
		} else if (!imagesCheck) {
			shopErrCheck.error(209620, 1);
		} else if (!soundCheck) {
			shopErrCheck.error(209620, 1);
		} else if (!shopCheck) {
			shopErrCheck.error(209620, 1);
		} else if (!ossCheck) {
			shopErrCheck.error(209620, 1);
		}
	}

	init();
	
	// Cancel any ongoing async ops
	ec.cancelOperation();
	

	ecsUrl = 'https://ecs.shop.wii.com/ecs/services/ECommerceSOAP';

	iasUrl = 'https://ias.shop.wii.com/ias/services/IdentityAuthenticationSOAP';

	ccsUrl = 'http://ccs.cdn.shop.wii.com/ccs/download';

	ucsUrl = 'https://ccs.shop.wii.com/ccs/download';
	

	ec.setWebSvcUrls(ecsUrl, iasUrl);
	ec.setContentUrls (ccsUrl, ucsUrl);
	
	

	imagesPath = "/oss/oss/common/images/";
	htmlPath = "/oss/oss/common/html";
	ossPath = "https://oss-auth.shop.wii.com/oss/serv/";
	secureOssPath = "https://oss-auth.shop.wii.com/oss/serv/";	

	ecTimeout = new ECTimeout(parseInt("60000"));
	
	
	currBalance = document.getElementById("currentBalance");
	if(currBalance) {
		currBalance.innerHTML = getBalance();
	}		
	
	setLogUrl("Log.jsp");

    if(shop.isCompatibleMode)
    {
        setEulaUrl("L_01.jsp");
    }
    else
    {
        setEulaUrl("L_03_UA_1.jsp");
    }

	
	MM_preloadImages('/oss/oss/common/images//banner/under_banner_a.gif');
	var supportsCreditCard = 'false';
	if (ecSupportsSession()) {
        	ec.setSessionValue("supportsCreditCard", supportsCreditCard);
    	}

    updateHistory();
	var isConnecting = isConnectingPage();
    setConnectingToServer(isConnecting);
    
    if (isHRPDisablePage()) {
	   	wiiDisableHRP();
	} else {
	   	wiiEnableHRP();
	}
}

<!--  -----------------------------------------------------  -->
<!--  Copyright 2005-2014 Acer Cloud Technology, Inc.        -->
<!--  All Rights Reserved.                                   -->
<!--                                                         -->
<!--  This software contains confidential information and    -->
<!--  trade secrets of Acer Cloud Technology, Inc.           -->
<!--  Use, disclosure or reproduction is prohibited without  -->
<!--  the prior express written permission of Acer Cloud     -->
<!--  Technology, Inc.                                       -->
<!--  -----------------------------------------------------  -->


// Takes a progress object and returns the OSS error message to be displayed to the user
function getOssErrorMsg(progress)
{
	if (progress.status >= 0) { return ""; }
	
    var status = progress.status;
    var errCode = progress.errCode;
    var errInfo = progress.errInfo;

    var msg;	

	var a = new Array();	
	// EC lib Errors
	//a[-(EC_ERROR_CANCELED)] = "???OSS_ERROR_NETWORK_TIMEOUT???";
	a[-(EC_ERROR_NET_NA)] = "Une erreur est survenue lors de la connexion à Internet. Vérifiez vos paramètres Internet dans Paramètres Wii.<BR><BR>Pour toute assistance, visitez le site<BR>support.nintendo.com.";
	a[-(EC_ERROR_ECARD)] = "Le numéro d&rsquo;activation que vous avez entré est incorrect. Veuillez recommencer.<BR><BR>Pour toute assistance, visitez le site<BR>support.nintendo.com.<BR>";
	a[-(EC_ERROR_REGISTER)] = "Ce code Wii est incorrect.<BR><BR>Pour toute assistance, visitez le site support.nintendo.com.";
	a[-(EC_ERROR_ALREADY_OWN)] = "Une erreur est survenue. Attendez un moment puis réessayez.<BR><BR>Pour toute assistance, visitez le site<BR>support.nintendo.com.";
	msg = a[-status];

    if (status == EC_ERROR_WS_REPORT) {
    	 msg = getWebServiceErrorMsg(errCode, errInfo);
    } else if (status == EC_ERROR_NET_CONTENT ||
               status == EC_ERROR_FAIL ||
    	       status == EC_ERROR_WS_RECV) {
    	if (errCode != null && errCode < 0) {
    	    var httpStatus = errCodeToHTTPStatus(errCode);
    	    var nhttpStatus = errCodeToNHTTPStatus(errCode);    
      	    if (nhttpStatus == 0 && shop.isCompatibleMode) {
    		    msg = "Une erreur est survenue lors de la connexion à Internet. Vérifiez vos paramètres Internet dans les paramètres de la console Wii U.";
    		} else if (nhttpStatus == 0) {
    		    msg = "Une erreur est survenue lors de la connexion à Internet. Vérifiez vos paramètres Internet dans Paramètres Wii.<BR><BR>Pour toute assistance, visitez le site<BR>support.nintendo.com.";
    		} else if (nhttpStatus != 0) {
    		    msg = "Une erreur est survenue. Attendez un moment puis réessayez.<BR><BR>Pour toute assistance, visitez le site<BR>support.nintendo.com.";
    		}
    	}
    }
        
    if (msg == null || msg == '') {
    	msg = "Une erreur est survenue. Attendez un moment puis réessayez.<BR><BR>Pour toute assistance, visitez le site<BR>support.nintendo.com.";
	}
	return msg;
}

function setErrorHtmlMsg(elem, errorCode, errorMsg)
{
    var html =
	 	'<span class="warningRed">'
		+ "Code d&rsquo;erreur: <span id='errorCode'></span></span>"
		+ '<BR><span class="contentsRedM">' + errorMsg + '</span>';
	elem.innerHTML = html;
	document.getElementById("errorCode").innerHTML = errorCode;
}

function setErrorHtml(elem, progress)
{
	if (elem != null) {
	    var errorCode = getOssErrorCode(progress);
    	var errorMsg = getOssErrorMsg(progress);
    	setErrorHtmlMsg(elem, errorCode, errorMsg);
	}
}


// Web service error messages 
// (only include message that may potentially be displayed to user)
// (errCode is progress.errCode from a web service)
// (errInfo is progress.errInfo from a web service)
function getWebServiceErrorMsg(errCode, errInfo)
{
	var a = new Array();
	
	// ECS Errors
	a[617] = "Le numéro d&rsquo;activation que vous avez entré est incorrect. Veuillez recommencer.<BR><BR>Pour toute assistance, visitez le site<BR>support.nintendo.com.<BR>";
	a[618] = "Cette Wii Points Card ne peut<BR>pas être utilisée dans votre région.<BR><BR>Pour toute assistance, visitez le site<BR>support.nintendo.com.";
	a[621] = "Une erreur est survenue. Attendez un moment puis réessayez.<BR><BR>Pour toute assistance, visitez le site<BR>support.nintendo.com.";
	a[623]	= "Vous avez déjà téléchargé ce titre, et la période d&rsquo;essai est terminée. Vous ne pouvez pas le télécharger à nouveau.<BR><BR>Pour toute assistance, visitez le site<BR>support.nintendo.com.";
	a[642] = "Une erreur est survenue. Attendez un moment puis réessayez.<BR><BR>Pour toute assistance, visitez le site<BR>support.nintendo.com.";
	a[643] = "Une erreur est survenue. Attendez un moment puis réessayez.<BR><BR>Pour toute assistance, visitez le site<BR>support.nintendo.com.";
	a[644] = "Vous ne pouvez pas utiliser de carte de crédit avec cette console.<BR><BR>Pour plus de détails, visitez le site support.nintendo.com.";
	a[645] = "Une erreur est survenue. Attendez un moment puis réessayez.<BR><BR>Pour toute assistance, visitez le site<BR>support.nintendo.com.";
	
	// ECS Gift Errors
	a[646] = "Une erreur est survenue. Veuillez patienter et réessayer ultérieurement.<BR><BR>Visitez le site support.nintendo.com pour toute assistance si le problème persiste.";
	a[621] = "Une erreur est survenue. Attendez un moment puis réessayez.<BR><BR>Pour toute assistance, visitez le site<BR>support.nintendo.com.";
	a[626] = "Une erreur est survenue. Attendez un moment puis réessayez.<BR><BR>Pour toute assistance, visitez le site<BR>support.nintendo.com.";
	a[625] = "Une erreur est survenue et ne peut pas être résolue en ce moment. Réessayez plus tard.<BR><BR>Pour toute assistance, visitez le site<BR>support.nintendo.com.";
	
	// ETS Errors
	a[705] = "Une erreur est survenue. Attendez un moment puis réessayez.<BR><BR>Pour toute assistance, visitez le site<BR>support.nintendo.com.";
	a[706] = "Une erreur est survenue. Attendez un moment puis réessayez.<BR><BR>Pour toute assistance, visitez le site<BR>support.nintendo.com.";
	a[707] = "Une erreur est survenue. Attendez un moment puis réessayez.<BR><BR>Pour toute assistance, visitez le site<BR>support.nintendo.com.";
	
	// PAS Errors
	a[810]	= "Une erreur est survenue lors de l&rsquo;utilisation de votre billet de téléchargement Wii.<BR><BR>Pour toute assistance, visitez le site support.nintendo.com.";
	a[811]	= "Cette Wii Points Card n&rsquo;est plus<BR>valide.";
	//a[812]	= "???OSS_ERROR_ECARD_NOT_USABLE???";
	//a[813]	= "???OSS_ERROR_ECARD_NOT_USABLE???";
	//a[814]	= "???OSS_ERROR_ECARD_NOT_USABLE???";
	a[815]	= "Le numéro d&rsquo;activation que vous avez entré a déjà été utilisé.<BR><BR>Pour toute assistance, visitez le site<BR>support.nintendo.com.";
	a[819]	= "Le numéro d&rsquo;activation que vous avez entré est incorrect. Veuillez recommencer.<BR><BR>Pour toute assistance, visitez le site<BR>support.nintendo.com.<BR>";
	
	a[826]	= "Le serveur est surchargé.<BR><BR>Veuillez réessayer un peu plus tard.";
	a[829]	= "Le serveur est surchargé.<BR><BR>Veuillez réessayer un peu plus tard.";
	a[830]	= "Le numéro d&rsquo;activation que vous avez entré est incorrect. Veuillez recommencer.<BR><BR>Pour toute assistance, visitez le site<BR>support.nintendo.com.<BR>";
	a[831] = "Cette Wii Points Card ne peut<BR>pas être utilisée dans votre région.<BR><BR>Pour toute assistance, visitez le site<BR>support.nintendo.com.";

	// IAS Errors 
	a[901]	= "Ce code Wii est incorrect.<BR><BR>Pour toute assistance, visitez le site support.nintendo.com.";
	a[903]	= "Une erreur est survenue. Attendez un moment puis réessayez.<BR><BR>Pour toute assistance, visitez le site<BR>support.nintendo.com.";
	a[928] = "Une erreur est survenue. Attendez un moment puis réessayez.<BR><BR>Pour toute assistance, visitez le site<BR>support.nintendo.com.";
	a[958]	= "Une erreur est survenue et ne peut pas être résolue en ce moment. Réessayez plus tard.<BR><BR>Pour toute assistance, visitez le site<BR>support.nintendo.com.";
	a[942] = "Impossible de confirmer ce nom d&rsquo;utilisateur pour le moment à cause d&rsquo;une erreur sur le serveur. Veuillez réessayer un peu plus tard.<BR><BR>Pour toute assistance, visitez le site<BR>support.nintendo.com.";
	a[943]	= "Le nom d&rsquo;utilisateur ou le mot de passe est incorrect. Vérifiez ces informations et réessayez.<BR><BR>Si vous avez oublié votre nom d&rsquo;utilisateur ou votre mot de passe, visitez le site club.nintendo.com.";

	a[941] = "Le nom d&rsquo;utilisateur ou le mot de passe est incorrect. Vérifiez ces informations et réessayez.<BR><BR>Si vous avez oublié votre nom d&rsquo;utilisateur ou votre mot de passe, visitez le site club.nintendo.com.";
	
	// More IAS Errors
	a[1401] = "Le nom d&rsquo;utilisateur ou le mot de passe est incorrect. Vérifiez ces informations et réessayez.<BR><BR>Si vous avez oublié votre nom d&rsquo;utilisateur ou votre mot de passe, visitez le site club.nintendo.com.";
	a[1402] = "Les limitations de votre compte Club Nintendo ne permettent pas de le relier à votre compte de la Chaîne boutique Wii.<BR><BR>Pour toute assistance, visitez le site<BR>support.nintendo.com.";
        a[1403] = "Les limitations de votre compte Club Nintendo ne permettent pas de le relier à votre compte de la Chaîne boutique Wii.<BR><BR>Pour toute assistance, visitez le site<BR>support.nintendo.com.";
	a[1499] = "Impossible de confirmer ce nom d&rsquo;utilisateur pour le moment, car une opération d&rsquo;entretien est en cours sur le serveur.<BR><BR>Veuillez nous excuser pour tout inconvénient occasionné et réessayer un peu plus tard.";
	
	// OSS Errors
	a[1610]	= "La date d&rsquo;expiration de ce billet de téléchargement Wii est dépassée.";
	a[1611]	= "Le code du billet de téléchargement Wii est incorrect.<BR><BR>Visitez support.nintendo.com pour plus de détails.";
	a[1612] = "Ce billet de téléchargement Wii ne peut pas être utilisé dans votre pays.<BR><BR>Visitez support.nintendo.com pour plus de détails.";
	a[1613] = "Pour le moment, aucun titre n&rsquo;est disponible pour ce billet de téléchargement Wii. Vérifiez que vous avez entré le bon code.<BR><BR>Note : Si vous avez activé le contrôle parental, tous les titres disponibles sur la Chaîne boutique Wii ne sont peut-être pas affichés. Vérifiez les paramètres du contrôle parental.";
	
	
	var msg = a[errCode];
	if(msg == null || msg == "") { // default errors
		if ((errCode >= 1400 && 
		     errCode <= 1499)) {
			msg = "Impossible de confirmer ce nom d&rsquo;utilisateur pour le moment à cause d&rsquo;une erreur sur le serveur. Veuillez réessayer un peu plus tard.<BR><BR>Pour toute assistance, visitez le site<BR>support.nintendo.com.";
		}
	}
	return msg;
}

// NOA errors
function getNOAError(code)
{
	var a=new Array();
	
	a[NOA_ERROR_CountyRequired] 				= "Veuillez entrer le nom de votre comté.";
	a[NOA_ERROR_FoundOnBlacklist]				= "Cette carte ne peut pas être utilisée.<BR><BR>Pour plus d&rsquo;informations, consultez le site support.nintendo.com.";
	a[NOA_ERROR_BillingAddress]                             = "L&rsquo;adresse que vous avez entrée est incorrecte.<BR><BR>Vérifiez les informations que vous avez entrées et réessayez.";
	a[NOA_ERROR_InvalidCardType]                            = "Ce numéro de carte n&rsquo;est pas valide.<BR><BR>Vérifiez les informations que vous avez entrées et réessayez.";
	a[NOA_ERROR_InvalidVfyValue]                            = "Les informations relatives à votre carte de crédit sont incorrectes.<BR><BR>Vérifiez les informations que vous avez entrées et réessayez.";
	a[NOA_ERROR_InvalidCcNumberAndExpDate]                  = "Les informations relatives à votre carte de crédit sont incorrectes.<BR><BR>Vérifiez les informations que vous avez entrées et réessayez.";
	a[NOA_ERROR_InvalidCreditCardNumber]			= "Ce numéro de carte n&rsquo;est pas valide.<BR><BR>Vérifiez les informations que vous avez entrées et réessayez.";
	a[NOA_ERROR_InvalidExpDate]				= "Les informations relatives à votre carte de crédit sont incorrectes.<BR><BR>Vérifiez les informations que vous avez entrées et réessayez.";
	a[NOA_ERROR_InvalidPostalCode]                          = "Ce code postal ne correspond pas au pays enregistré dans les paramètres de la console.<BR><BR>Vérifiez les informations que vous avez entrées et réessayez.";
	a[NOA_ERROR_TechnicalDifficulties]			= "Les informations relatives à votre carte de crédit n&rsquo;ont pas pu être vérifiées. Veuillez réessayer un peu plus tard.<BR><BR>Pour toute assistance, visitez le site<BR>support.nintendo.com.";
	a[NOA_ERROR_TryAgainLater]				= "Les informations relatives à votre carte de crédit n&rsquo;ont pas pu être vérifiées. Veuillez réessayer un peu plus tard.<BR><BR>Pour toute assistance, visitez le site<BR>support.nintendo.com.";

	a[NOA_RESULT_ERROR_CreditCardDeclined]			= "Cette carte ne peut pas être utilisée.<BR><BR>Contactez la compagnie qui l&rsquo;a délivrée pour plus d&rsquo;informations.";
	a[NOA_RESULT_ERROR_CreditCardDeclined_Funds]		= "Cette carte ne peut pas être utilisée.<BR><BR>Contactez la compagnie qui l&rsquo;a délivrée pour plus d&rsquo;informations.";
	a[NOA_RESULT_ERROR_CreditCardDeclined_Inactive]		= "Cette carte ne peut pas être utilisée.<BR><BR>Contactez la compagnie qui l&rsquo;a délivrée pour plus d&rsquo;informations.";
	a[NOA_RESULT_ERROR_CreditCardDeclined_Exp]		= "La date d&rsquo;expiration de cette carte est incorrecte.";
	a[NOA_RESULT_ERROR_CreditCardDeclined_Code]		= "Les informations relatives à votre carte de crédit sont incorrectes.<BR><BR>Vérifiez les informations que vous avez entrées et réessayez.";
	a[NOA_RESULT_ERROR_CreditCardDeclined_CCNum]		= "Ce numéro de carte n&rsquo;est pas valide.<BR><BR>Vérifiez les informations que vous avez entrées et réessayez.";
	a[NOA_RESULT_ERROR_CreditCardDeclined_Limit]            = "Cette carte ne peut pas être utilisée.<BR><BR>Contactez la compagnie qui l&rsquo;a délivrée pour plus d&rsquo;informations.";
	a[NOA_RESULT_ERROR_CreditCardDeclined_Invalid]		= "Les informations relatives à votre carte de crédit sont incorrectes.<BR><BR>Vérifiez les informations que vous avez entrées et réessayez.";
	a[NOA_RESULT_ERROR_CreditCardDeclined_AVS]		= "Le code postal de l&rsquo;adresse de facturation est incorrect. Vérifiez les informations que vous avez entrées et réessayez.";

	a[NOA_ERROR_EmptyVfyValue]				= "Veuillez entrer les 3 chiffres de votre code de sécurité.";

	var msg = a[code];
	return msg;
}

// IAS errors
function isLoyaltyError(progress)
{
	if (progress.status == EC_ERROR_WS_REPORT) {
		if ((progress.errCode >= 1400 && 
		     progress.errCode <= 1499) ||
			(progress.errCode == 942) ||
			(progress.errCode == 943) ||
			(progress.errCode == 941)) {
			return true;
		}
	}
	return false;
}	

function needCheckRegistration(progress)
{
	if (progress.status == EC_ERROR_WS_REPORT) {
		if ((progress.errCode == 903) ||
		     (progress.errCode == 642) ||
		     (progress.errCode == 625)) {
			return true;
		}
	}
	return false;		
}

function needSyncEticket(progress)
{
	if (progress.status == EC_ERROR_WS_REPORT) {
		if (progress.errCode == 621) {
			return true;
		}
	}
	return false;		
}



//-->

</script>
<title>Confirmation de téléchargement</title>
<style type="text/css">
  /* B_09:  Confirm Software Purchase */


#text01-01 {
	position:absolute;
	left:29px;
	top:28px;
	width:442px;
	height:28px;
	z-index:28;
}
#goodsconfirmation {
	position:absolute;
	left:36px;
	top:85px;
	width:537px;
	height:225px;
	z-index:30;
}
#text03-01 {
	position:absolute;
	left:40px;
	top:141px;
	width:293px;
	height:18px;
	z-index:58;
}
#text04-01 {
	position:absolute;
	left:40px;
	top:160px;
	width:293px;
	height:18px;
	z-index:55;
}
#text05-01 {
	position:absolute;
	left:40px;
	top:182px;
	width:293px;
	height:18px;
	z-index:51;
}
#text06-01 {
	position:absolute;
	left:40px;
	top:206px;
	width:293px;
	height:18px;
	z-index:45;
}
#text07-01 {
	position:absolute;
	left:40px;
	top:225px;
	width:293px;
	height:18px;
	z-index:42;
}
#text08-01 {
	position:absolute;
	left:40px;
	top:247px;
	width:293px;
	height:18px;
	z-index:39;
}
#pointcost01 {
	position:absolute;
	left:340px;
	top:141px;
	width:90px;
	height:18px;
	z-index:57;
}
#confirmation {
	position:absolute;
	left:36px;
	top:320px;
	width:538px;
	height:30px;
	z-index:60;
}
#pointword02 {
	position:absolute;
	left:340px;
	top:160px;
	width:90px;
	height:18px;
	z-index:54;
}
#pointword03 {
	position:absolute;
	left:340px;
	top:182px;
	width:90px;
	height:18px;
	z-index:50;
}
#blockcost01 {
	position:absolute;
	left:340px;
	top:206px;
	width:90px;
	height:18px;
	z-index:44;
}
#blockcost02 {
	position:absolute;
	left:340px;
	top:225px;
	width:90px;
	height:18px;
	z-index:41;
}
#blockcost03 {
	position:absolute;
	left:340px;
	top:247px;
	width:90px;
	height:18px;
	z-index:38;
}
#text02-01 {
	position:absolute;
	left:40px;
	top:270px;
	width:528px;
	height:20px;
	z-index:59;
}
#pointword01 {
	position:absolute;
	left:437px;
	top:141px;
	width:130px;
	height:18px;
	z-index:56;
}
#points02 {
	position:absolute;
	left:437px;
	top:160px;
	width:130px;
	height:18px;
	z-index:53;
}
#pointos03 {
	position:absolute;
	left:437px;
	top:182px;
	width:130px;
	height:18px;
	z-index:46;
}
#blockword01 {
	position:absolute;
	left:437px;
	top:206px;
	width:130px;
	height:18px;
	z-index:43;
}
#blockword02 {
	position:absolute;
	left:437px;
	top:225px;
	width:130px;
	height:18px;
	z-index:40;
}
#blockword03 {
	position:absolute;
	left:437px;
	top:247px;
	width:130px;
	height:18px;
	z-index:34;
}
#TitleName1stline {	position:absolute;
	left:64px;
	top:88px;
	width:480px;
	z-index:37;
}
#TitleName2stline {	position:absolute;
	left:64px;
	top:112px;
	width:480px;
	z-index:36;
}
#selectionMessage {
    position:absolute;
    left:46px;
    top:71px;
    width:517px;
    height:98px;
}
#nandDLButton {
    position:absolute;
    left:46px;
    top:169px;
    width:236px;
    height:184px;
}
#banner01 {
    position:absolute;
    left:0px;
    top:0px;
    width:100%;
    height:100%;
    z-index:28;
}
#text01 {
    position:absolute;
    left:8px;
    top:116px;
    width:220px;
    height:54px;
    z-index:29;
}
#spacer01 {
    position:absolute;
    left:0px;
    top:0px;
    width:100%;
    height:100%;
    z-index:30;
}


#sdDLButton {
    position:absolute;
    left:326px;
    top:169px;
    width:236px;
    height:184px;
}
#banner02 {
    position:absolute;
    left:0px;
    top:0px;
    width:100%;
    height:100%;
    z-index:28;
}
#text02 {
    position:absolute;
    left:8px;
    top:116px;
    width:220px;
    height:54px;
    z-index:29;
}
#spacer02 {
    position:absolute;
    left:0px;
    top:0px;
    width:100%;
    height:100%;
    z-index:30;
}
#sdDisable {
	position:absolute;
	left:0px;
	top:0px;
	width:100%;
	height:100%;
	z-index:40;
}

#coolingoff {
	position:absolute;
	left:34px;
	top:94px;
	width:542px;
	height:81px;
	z-index:28;
}</style>
<script language="JavaScript" src="Confirmation%20de%20t%C3%A9l%C3%A9chargement_fichiers/shopsd.js"></script>
<script language="JavaScript" src="Confirmation%20de%20t%C3%A9l%C3%A9chargement_fichiers/title_manager.js"></script>
<script type="text/JavaScript">
<!--  -----------------------------------------------------  -->
<!--  Copyright 2005-2014 Acer Cloud Technology, Inc.        -->
<!--  All Rights Reserved.                                   -->
<!--                                                         -->
<!--  This software contains confidential information and    -->
<!--  trade secrets of Acer Cloud Technology, Inc.           -->
<!--  Use, disclosure or reproduction is prohibited without  -->
<!--  the prior express written permission of Acer Cloud     -->
<!--  Technology, Inc.                                       -->
<!--  -----------------------------------------------------  -->
var sdErrorMessage = ['Une erreur est survenue lors<BR>de l&rsquo;accès à la carte SD.',
                      'Une erreur est survenue lors<BR>de l&rsquo;accès à la carte SD.',
                      'Une erreur est survenue lors<BR>de l&rsquo;accès à la carte SD.',
                      'Une erreur est survenue lors<BR>de l&rsquo;accès à la carte SD.',
                      'Une erreur est survenue lors<BR>de l&rsquo;accès à la carte SD.',
                      'Une erreur est survenue lors<BR>de l&rsquo;accès à la carte SD.',
                      'Une erreur est survenue lors<BR>de l&rsquo;accès à la carte SD.',
                      'Une erreur est survenue lors<BR>de l&rsquo;accès à la carte SD.',
                      'Une erreur est survenue lors<BR>de l&rsquo;accès à la carte SD.',
                      'Une erreur est survenue lors<BR>de l&rsquo;accès à la carte SD.',
                      'Une erreur est survenue lors<BR>de l&rsquo;accès à la carte SD.',
                      'Une erreur est survenue lors<BR>de l&rsquo;accès à la carte SD.',
                      'Une erreur est survenue lors<BR>de l&rsquo;accès à la carte SD.',
                      'Une erreur est survenue lors<BR>de l&rsquo;accès à la carte SD.',
                      'Une erreur est survenue lors<BR>de l&rsquo;accès à la carte SD.',
                      'Une erreur est survenue lors<BR>de l&rsquo;accès à la carte SD.',
                      'Une erreur est survenue lors<BR>de l&rsquo;accès à la carte SD.',
                      'Aucune carte SD n&rsquo;est détectée.',
                      'Impossible d&rsquo;utiliser le périphérique<BR>inséré dans la fente carte SD.',
                      'Impossible d&rsquo;utiliser le périphérique<BR>inséré dans la fente carte SD.',
                      'La carte SD est protégée en écriture.<BR>Veuillez retirer la protection.',
                      'Une erreur est survenue lors<BR>de l&rsquo;accès à la carte SD.',
                      'Une erreur est survenue lors<BR>de l&rsquo;accès à la carte SD.',
                      'Une erreur est survenue lors<BR>de l&rsquo;accès à la carte SD.',
                      'Il n&rsquo;y a pas assez d&rsquo;espace libre dans la mémoire de la console Wii.<BR>Libérez '+0+' bloc(s) en transférant des données sur une carte SD ou en effaçant des données à partir de l&rsquo;écran de gestion des données de la console Wii.',
                      'La carte SD contient déjà ces<BR>données.<BR><BR>Veuillez les effacer depuis l&rsquo;écran de<BR>gestion des données.',
                      'Une erreur est survenue lors<BR>de l&rsquo;accès à la carte SD.',
                      '',
                      '',
                      '',
                      'La mémoire de la console Wii contient<BR>déjà ces données.<BR><BR>Veuillez les effacer depuis l&rsquo;écran de<BR>gestion des données.',
                      'Il n&rsquo;y a pas de chaîne libre dans votre<BR>menu Wii. Veuillez transférer des<BR>chaînes vers une carte SD ou en<BR>effacer depuis l&rsquo;écran de gestion des<BR>données.',
                      'Il n&rsquo;y a pas assez d&rsquo;espace libre dans la mémoire de la console Wii pour ajouter ce titre. Transférez des fichiers vers une carte SD ou effacez-en depuis l&rsquo;écran de gestion des données.',
                      'Une erreur est survenue lors<BR>de l&rsquo;accès à la carte SD.',
                      'Une erreur est survenue lors<BR>de l&rsquo;accès à la carte SD.',
                      'Une erreur est survenue lors<BR>de l&rsquo;accès à la carte SD.',
                      'Il n&rsquo;y a pas assez d&rsquo;espace libre dans<BR>la mémoire de la console Wii.<BR>Libérez '+0+' bloc(s) en transférant des<BR>données sur une carte SD ou en<BR>effaçant des données à partir de<BR>l&rsquo;écran de gestion des données de la<BR>console Wii.<BR>' ];
<!--
var titleId = '';
var titleSize = '';
var titleTmdSize = '';
var latestVersion = parseInt('');

var titlePoints = '0';

var titleManager = new TitleManager(titleId, titleSize, titleTmdSize, latestVersion);
//titleManager.traceLog();

var titleSizeKB = titleManager.getTitleKBSize();
var titleSizeBlock = 0;
var sd = '';
var redownloadFlagExt;
var itemId;

function checkSD()
{
    if (sd == 'Y') {
        showSDSelection("true");
        onSDButtonPressed(titleId, itemId);
    }
}

function showSDSelection(checkSDFlag)
{
    document.getElementById("heading").innerHTML = 'Destination';
    hideElement("confirmframe");
    hideElement("sdErrorDiv");
    hideElement("sdErrorNoSizeDiv");
    setUnderButton(false);
    setUnderButtonL(false);
    if (ecSupportsSession()) {
        var status = ec.getSessionValue("giftStatus");
        var useCampaignCode = ec.getSessionValue("useCampaignCode");

        if (status == "receiving") {
            setUnderButtonL(true, 'Plus tard', "javascript:goGiftNext('')", "wiiCancelSound()");
        } else if (useCampaignCode == "true") {
            setUnderButtonL(true, 'Plus tard', "javascript:showBack()", "wiiCancelSound()");
        } else {
            setUnderButtonL(true, 'Retour', "javascript:showOldPage('B_05.jsp')", "wiiCancelSound()");
        }
    }
    setUnderButtonR(false);
    showElement("sdbuttons");
    wiiEnableHRP();

    if (checkSDFlag != "true") {
        checkSDIsInserted();
    }
}
var innerCheckSDIsInserted = makeCheckSDIsInserted();
function checkSDIsInserted(){
    if (document.getElementById("sdbuttons").style.display == 'none') {
        return;
    }
    innerCheckSDIsInserted();
    setTimeout('checkSDIsInserted()', ecProgressInterval);
}

function showConfirmframe()
{
    wiiDisableHRP();
    document.getElementById("heading").innerHTML = 'Confirmation de téléchargement';
    hideElement("sdbuttons");
    showElement("confirmframe");
    setUnderButtonR(true);

    if (sd != 'Y') {
        if (ecSupportsSession()) {
            var status = ec.getSessionValue("giftStatus");
            var useCampaignCode = ec.getSessionValue("useCampaignCode");
            if (status == "receiving" || useCampaignCode == "true") {
                setUnderButtonL(true, 'Oui', "javascript:showPage('B_10.jsp?SD=N&titleId=')", "wiiSelectSound()");
            } else {
                setUnderButtonL(true, 'Oui', "javascript:showPage('B_10.jsp?SD=N&titleId=')", "wiiSelectSound()");
            }
        } else {
            setUnderButtonL(true, 'Oui', "javascript:showPage('B_10.jsp?SD=N&titleId=')", "wiiSelectSound()");
        }
    } else {
        if (ecSupportsSession()) {
            var status = ec.getSessionValue("giftStatus");
            var useCampaignCode = ec.getSessionValue("useCampaignCode");
            if (status == "receiving" || useCampaignCode == "true") {
                setUnderButtonL(true, 'Oui', "javascript:showPage('B_10.jsp?SD=Y&titleId=')", "wiiSelectSound()");
            } else {
                setUnderButtonL(true, 'Oui', "javascript:showPage('B_10.jsp?SD=Y&titleId=')", "wiiSelectSound()");
            }
        } else {
            setUnderButtonL(true, 'Oui', "javascript:showPage('B_10.jsp?SD=Y&titleId=')", "wiiSelectSound()");
        }
    }
}

function onNANDButtonPressed(titleId, itemId)
{
    sd = 'N';
    if (doChecking('N')) {
        showConfirmframe();
        showMsgWithSD(false);
        showRemainValue(sd);
    }
}

function onSDButtonPressed(titleId, itemId)
{
    titleSizeBlock = titleManager.getSDBackupBlocks();
    if(!sdDLErrorHandle(titleId, titleSizeKB,'')){
        return;
    }
    sd = 'Y';
    if (doChecking('Y')) {
        showConfirmframe();
        showMsgWithSD(true);
        showRemainValue(sd);
    }
}

function getSDError(sdError)
{
    var sdErrorCode = (sdError * -1) + 209630;
    hideElement("sdbuttons");
    setErrorMsg(sdErrorCode, sdErrorMessage[(sdError * -1) - 1]);
    showElement("sdErrorDiv");
    setUnderButtonL(true, "Retour", "javascript:showSDSelection()", "wiiCancelSound()");
}

function getErrorNoSize(sdError)
{
    // No block = -25, No free channel = -32, No i-nodes = -33, title is in SD = -26, title is in NAND = -31
    sdErrorMessage[24] = 'Il n&rsquo;y a pas assez d&rsquo;espace libre sur<BR>la carte SD pour télécharger ce<BR>logiciel.<BR>Libérez '+titleSizeBlock+' bloc(s) en effaçant des<BR>données à partir de l&rsquo;écran de gestion<BR>des données de la console Wii ou en<BR>insérant une autre carte SD qui<BR>contient '+titleSizeBlock+' bloc(s) d&rsquo;espace libre.';
    sdErrorMessage[36] = 'Il n&rsquo;y a pas assez d&rsquo;espace libre dans<BR>la mémoire de la console Wii.<BR>Libérez '+titleSizeBlock+' bloc(s) en transférant des<BR>données sur une carte SD ou en<BR>effaçant des données à partir de<BR>l&rsquo;écran de gestion des données de la<BR>console Wii.<BR>';
    hideElement("sdbuttons");
    showElement("sdErrorNoSizeDiv");
    document.getElementById("sdErrorNoSizeDivMsg").innerHTML = sdErrorMessage[(sdError * -1) - 1];

    setUnderButtonL(true, "Retour", "javascript:showSDSelection()", "wiiCancelSound()");
    setUnderButton(true, "Gestion des données", 'javascript:showDataMng("/startup?initpage=showTitle&titleId='+titleId+'")', "wiiSelectSound()");
}

var nonSDSupport = nonSDSupport();

function showMsgWithSD(flag)
{
   if (flag) {
       hideElement("MsgWithoutSD");
       showElement("MsgWithSD");
   } else {
       hideElement("MsgWithSD");
       showElement("MsgWithoutSD");
   }
}

function doChecking(sd)
{
	trace("do checking: SD = "+sd);
	var r = ec.getDeviceInfo();
	
        var isSatisfiedSpace = titleManager.checkDownloadSpace(sd);
        // real size is stored titleSizeBlock.
        // javascript can do calculate size only by finished size checking
        titleSizeBlock = titleManager.getNeededTitleBlocks(sd);

	// Display warning messages if title is not already downloaded and on card
	var warningDisplayed = true;
	
	var titlesDownloaded = getTitlesDownloaded();
	var freeChannels = r.freeChannelAppCount - titlesDownloaded;
	var availInodes = r.maxUserInodes - r.usedUserInodes;

	// Get number of user inodes needed
	var inodesNeeded = '';
	trace("Max user inodes is " + r.maxUserInodes);
	trace("Used user inodes is " + r.usedUserInodes);
	trace("Available user inodes is " + availInodes);
	trace("Needed user inodes is " + inodesNeeded);
	
	trace("freeChannelAppAcount is " + r.freeChannelAppCount);
	trace("freeChannels is " + freeChannels);
	
	if (freeChannels <= 0 && sd != 'Y') {
		// there are no available channels.
		getErrorNoSize(-32);
	} else if (!isSatisfiedSpace) {
		// Not enough space
		getErrorNoSize(-37);
	} else if (availInodes < inodesNeeded && sd != 'Y') {
		getErrorNoSize(-33);
	} else {
		warningDisplayed = false;
	}
	
	if (warningDisplayed) {
		return false;
	} else {
		return true;
	}
}

function showRemainValue(sd)
{
	// show space are re-input
        
        trace("sdMode : " + sd );

    if (sd == 'Y') {
        var spaceNeeded = titleManager.getSDBackupBlocks();
        var availSpace  = Math.floor(getFreeKBytes() / 128);
        if (availSpace < 0) {
            hideElement("confirmframe");
            getSDError(-36);
            return;
        }
    } else {
        var spaceNeeded = titleManager.getNeededTitleBlocks(sd);
        var availSpace  = titleManager.getAvailUserBlocks();
    }
        
        trace("spaceNeeded : " + spaceNeeded);
        trace("availSpace  : " + availSpace);

	var remainingAvailSpace = Math.max( availSpace - spaceNeeded, 0 );
        trace("remainingAvailSpace  : " + remainingAvailSpace);

	document.getElementById("blockcost01").innerHTML = 
		'<div align="right" class="catalogTitleBlack_01">' + availSpace + '</div>';
	document.getElementById("blockcost02").innerHTML = 
		'<div align="right" class="contentsRedM">' + spaceNeeded + '</div>';

	document.getElementById("blockcost03").innerHTML = 
		'<div align="right" class="catalogTitleBlack_01">' + remainingAvailSpace + '</div>';

	if (sd == 'Y') {
		document.getElementById("BuyMsg").innerHTML = 
			'Le téléchargement de ce titre nécessite '+titlePoints+' Wii Points ainsi que '+spaceNeeded+' bloc(s) libre(s) sur la carte SD.';
	} else {
		document.getElementById("BuyMsg").innerHTML = 
			'Le téléchargement de ce titre nécessite '+titlePoints+' Wii Points ainsi que '+spaceNeeded+' blocs libres dans la mémoire de la console Wii.';
	}

}

function statusOfPurchase(){
    var titleLicense = getTitleLicense(titleId);
    var isOnDevice = titleManager.getIsOnDevice();


    var isUpdate = titleManager.isUpdate();
    var itemPrice = '';
    var giftable = '';
    
    var scaGoldTitleStatus   = '' ; 
    var scaSilverTitleStatus = '' ;
    var icrTitleStatus = '';


    var userSCAStatus = getSCAUserStatus();
    var userICRStatus = getICRUserStatus();

    var retValue;
    trace("userSCAStatus:::"+userSCAStatus); 
    trace("userICRStatus:::"+userICRStatus);
    trace("scaGoldTitleStatus:::"+scaGoldTitleStatus);
    trace("scaSilverTitleStatus:::"+scaSilverTitleStatus);
    trace("icrTitleStatus:::"+icrTitleStatus);

    if(itemPrice == ''){
        retValue = "NULL";
        return retValue;
    }
    
    if(titleLicense == "Unlimited"){
       if(isUpdate){
           retValue = "UPDATE"; 
       }else if(isOnDevice){
           retValue = "NULL";
       }else{
           retValue = "RE"
       }
    }else{
       if(getICRUserStatus() == "ACTIVATED" && icrTitleStatus == "ICR"){
           retValue = "ICR";
       }else if(getSCAUserStatus() == "SCAGOLD" &&  scaGoldTitleStatus == "SCAGOLD"){
           retValue = "SCAGOLD";
       }else if(getSCAUserStatus() == "SCASILVER" &&  scaSilverTitleStatus == "SCASILVER"){
           retValue = "SCASILVER";
       }else if(itemPrice == '0'){
           retValue = "FREE";
       }else if(itemPrice != '0'){
           retValue = "PRICE";
       }else{
           //should not reach
           retValue = "ERROR";
       }
    }
    return retValue;
}

function initPage()
{
	initPageCommon();
    MM_preloadImages('/oss/oss/common/images//banner/under_banner_b.gif',
            '/oss/oss/common/images//banner/help_b.gif',
            '/oss/oss/common/images//banner/top_b.gif');
	if (ecSupportsSession()) {
		var status = ec.getSessionValue("giftStatus");
		// trace("giftStatus: "+status);
		
		var useCampaignCode = ec.getSessionValue("useCampaignCode");
		trace("useCampaignCode: " + useCampaignCode);
	
		if (status == "receiving") {
			setUnderButtonL(true, 'Oui', "javascript:showPage('B_10.jsp?SD=N&titleId=')", "wiiSelectSound()");
			setUnderButtonR(true, 'Plus tard', "javascript:goGiftNext('')", "wiiCancelSound()");
			document.getElementById("confirmationMsg").innerHTML = 'Télécharger ce logiciel dans la<BR>mémoire de la console Wii?';
			document.getElementById("confirmationMsgWithSD").innerHTML = 'Télécharger ce logiciel sur la<BR>carte SD?';
			document.getElementById("constElements").style.display='none';
			document.getElementById("giftline").style.display='';
			document.getElementById("giftcurrentBalance").innerHTML = getBalance();
		} else if (useCampaignCode == "true") {
			setUnderButtonL(true, 'Oui', "javascript:showPage('B_10.jsp?SD=N&titleId=')", "wiiSelectSound()");
			setUnderButtonR(true, 'Plus tard', "javascript:showBack()", "wiiCancelSound()");
			document.getElementById("confirmationMsg").innerHTML = 'Télécharger ce logiciel dans la<BR>mémoire de la console Wii?';
			document.getElementById("confirmationMsgWithSD").innerHTML = 'Télécharger ce logiciel sur la<BR>carte SD?';
			disableWiiPointButton();
		} else {
			setUnderButtonL(true, 'Oui', "javascript:showPage('B_10.jsp?SD=N&titleId=')", "wiiSelectSound()");
			setUnderButtonR(true, 'Non', "javascript:showOldPage('B_05.jsp')", "wiiCancelSound()");
			document.getElementById("confirmationMsg").innerHTML = 'Télécharger ce logiciel dans la<BR>mémoire de la console Wii?';
			document.getElementById("confirmationMsgWithSD").innerHTML = 'Télécharger ce logiciel sur la<BR>carte SD?';
		}
		// ec.setSessionValue("useCampaignCode", null);
		// trace("clear useCampaignCode in B_09. ");
	} else {
		setUnderButtonL(true, 'Oui', "javascript:showPage('B_10.jsp?SD=N&titleId=')", "wiiSelectSound()");
		setUnderButtonR(true, 'Non', "javascript:showOldPage('B_05.jsp')", "wiiCancelSound()");
	}

    if(statusOfPurchase() != "PRICE"){
        titlePoints = 0;
    }


    // show points and space
	//var r = ec.getDeviceInfo();
	//var t = ec.getTitleInfo (titleId);
	//var latestVersion = parseInt('');
	//var spaceNeeded = Math.ceil(getFsSizeNeeded(t, titleSize, latestVersion)/1024/128);
	//var availSpace = Math.floor(((r.totalBlocks - r.usedBlocks) * r.blockSize) / 1024 / 128);

	var currentBalance = getBalance();
        
        var spaceNeeded = titleManager.getNeededTitleBlocks('N');
        var availSpace = titleManager.getAvailUserBlocks();

	var remainingBalance = currentBalance - titlePoints;
	var remainingAvailSpace = Math.max( availSpace - spaceNeeded, 0 );
	document.getElementById("pointcost01").innerHTML = 
		'<div align="right" class="catalogTitleBlack_01">' + currentBalance + '</div>';
	document.getElementById("pointword02").innerHTML = 
		'<div align="right" class="contentsRedM">' + titlePoints + '</div>';
	document.getElementById("pointword03").innerHTML =
		'<div align="right" class="catalogTitleBlack_01">' + remainingBalance + '</div>';
	document.getElementById("blockcost01").innerHTML = 
		'<div align="right" class="catalogTitleBlack_01">' + availSpace + '</div>';
	document.getElementById("blockcost02").innerHTML = 
		'<div align="right" class="contentsRedM">' + spaceNeeded + '</div>';
	document.getElementById("blockcost03").innerHTML = 
		'<div align="right" class="catalogTitleBlack_01">' + remainingAvailSpace + '</div>';
	document.getElementById("BuyMsg").innerHTML = 
		'Le téléchargement de ce titre nécessite '+titlePoints+' Wii Points ainsi que '+spaceNeeded+' blocs libres dans la mémoire de la console Wii.';

    // check SD mode and SD available
    checkSD();
}
//-->
</script>
</head><script type="text/javascript" id="useragent-switcher">navigator.__defineGetter__("userAgent", function() {return "Opera/9.30 (Nintendo Wii; U; ; 2077-4; Wii Shop Channel/21.0(A); en"})</script>

<body onload="initPage();">
<!--  -----------------------------------------------------  -->
<!--  Copyright 2005-2014 Acer Cloud Technology, Inc.        -->
<!--  All Rights Reserved.                                   -->
<!--                                                         -->
<!--  This software contains confidential information and    -->
<!--  trade secrets of Acer Cloud Technology, Inc.           -->
<!--  Use, disclosure or reproduction is prohibited without  -->
<!--  the prior express written permission of Acer Cloud     -->
<!--  Technology, Inc.                                       -->
<!--  -----------------------------------------------------  -->
<div id="constElements">
  <div id="tophelpshadow"><img src="Confirmation%20de%20t%C3%A9l%C3%A9chargement_fichiers/top_help_shadow01.gif" width="132" height="75"></div>
  <div id="help">
    <img src="Confirmation%20de%20t%C3%A9l%C3%A9chargement_fichiers/help_a.gif" name="ManualImage" id="ManualImageID" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('ManualImage','','/oss/oss/common/images//banner/help_b.gif',1); wiiFocusSound();" onclick="showHelp(); wiiSelectSound();" width="52" height="55" border="0">
    <img src="Confirmation%20de%20t%C3%A9l%C3%A9chargement_fichiers/help_gray.gif" id="ManualGrayImageID" style="display:none" width="52" height="55" border="0">
    <img src="Confirmation%20de%20t%C3%A9l%C3%A9chargement_fichiers/spacer.gif" name="HelpSpacer" id="HelpSpacer" style="position:absolute; top:0px; left:0px; display:none" width="52" height="55" border="0">
  </div>

  <div id="top">
    <img src="Confirmation%20de%20t%C3%A9l%C3%A9chargement_fichiers/top_a.gif" name="TopImage" id="TopImageID" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('TopImage','','/oss/oss/common/images//banner/top_b.gif',1); wiiFocusSound();" onclick="showHome(); wiiCancelSound();" width="52" height="55" border="0">
    <img src="Confirmation%20de%20t%C3%A9l%C3%A9chargement_fichiers/top_gray.gif" id="TopGrayImageID" style="display:none" width="52" height="55" border="0">
    <img src="Confirmation%20de%20t%C3%A9l%C3%A9chargement_fichiers/spacer.gif" name="MainSpacer" id="MainSpacer" style="position:absolute; top:0px; left:0px; display:none" width="52" height="55" border="0">
  </div>
  
  <div class="dot" id="line01">･･･････････････････････････････････････････････････････････&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;･･</div>
  <div class="dot" id="line02">･･･････････････････････････････････････････････････････････････････････････</div>
  <div class="dot" id="upperLineLong" style="display:none">･･･････････････････････････････････････････････････････････････････････････</div>
  
  <div id="balanceInfo">
    <script type="text/JavaScript">MM_preloadImages('/oss/oss/common/images//banner/Addpoints_everywhere.gif');</script>
    <img src="Confirmation%20de%20t%C3%A9l%C3%A9chargement_fichiers/spacer.gif" name="PointSpacer" id="PointSpacer" style="position:absolute; top:376px; left:239px; z-index:20;" width="130" height="55" border="0">
    <div id="Wiipoint">
      <div class="buttonTextBlackM" align="center">Wii Points</div>
    </div>
    <div id="point" class="wiiPoint"><span id="currentBalance"></span></div>
  </div>
</div>
<!--  -----------------------------------------------------  -->
<!--  Copyright 2005-2014 Acer Cloud Technology, Inc.        -->
<!--  All Rights Reserved.                                   -->
<!--                                                         -->
<!--  This software contains confidential information and    -->
<!--  trade secrets of Acer Cloud Technology, Inc.           -->
<!--  Use, disclosure or reproduction is prohibited without  -->
<!--  the prior express written permission of Acer Cloud     -->
<!--  Technology, Inc.                                       -->
<!--  -----------------------------------------------------  -->
<script language="JavaScript">MM_preloadImages('/oss/oss/common/images//banner/under_banner_b.gif');</script>
<div id="underButtonL" style="display:none">
    <div id="underbannershadowL" class="buttonBannerShadow">
   	  <img src="Confirmation%20de%20t%C3%A9l%C3%A9chargement_fichiers/under_banner_shadow.gif" width="211" height="75">
   	</div>
    <div id="underbannerL" class="buttonBanner">
    	<img src="Confirmation%20de%20t%C3%A9l%C3%A9chargement_fichiers/under_banner_a.gif" id="underImgL" width="187" height="55">
    </div>
    <div id="underspacerL" class="buttonSpacer">
	  <a href="" id="underlinkL">
    	<img id="underimageL" src="Confirmation%20de%20t%C3%A9l%C3%A9chargement_fichiers/spacer.gif" onmouseover="MM_swapImage('underImgL','','/oss/oss/common/images//banner/under_banner_b.gif',1); snd.playSE( cSE_Forcus );" onmouseout="MM_swapImgRestore()" width="187" height="55" border="0">
      </a>	
    </div>
    <div id="underwordL" class="buttonTextBlackM buttonWord" align="center">
    </div>
</div>

<div id="underButtonR" style="display:none">
    <div id="underbannershadowR" class="buttonBannerShadow">
   	  <img src="Confirmation%20de%20t%C3%A9l%C3%A9chargement_fichiers/under_banner_shadow.gif" width="211" height="75">
   	</div>
    <div id="underbannerR" class="buttonBanner">
    	<img src="Confirmation%20de%20t%C3%A9l%C3%A9chargement_fichiers/under_banner_a.gif" id="underImgR" width="187" height="55">
    </div>
    <div id="underspacerR" class="buttonSpacer">
	  <a href="" id="underlinkR">
    	<img id="underimageR" src="Confirmation%20de%20t%C3%A9l%C3%A9chargement_fichiers/spacer.gif" onmouseover="MM_swapImage('underImgR','','/oss/oss/common/images//banner/under_banner_b.gif',1); snd.playSE( cSE_Forcus ); " onmouseout="MM_swapImgRestore()" width="187" height="55" border="0">
      </a>	
    </div>
    <div id="underwordR" class="buttonTextBlackM buttonWord" align="center">
    </div>
</div>

<div id="underButton" style="display:none">
    <div id="underbannershadow" class="buttonBannerShadow">
    	<img src="Confirmation%20de%20t%C3%A9l%C3%A9chargement_fichiers/under_banner_shadow.gif" width="211" height="75"></div>
    <div id="underbanner" class="buttonBanner">
    	<img src="Confirmation%20de%20t%C3%A9l%C3%A9chargement_fichiers/under_banner_a.gif" id="underImg" width="187" height="55"></div>
    <div id="underspacer" class="buttonSpacer">
	<a href="" id="underlink">
    	<img id="underimage" src="Confirmation%20de%20t%C3%A9l%C3%A9chargement_fichiers/spacer.gif" onmouseover="MM_swapImage('underImg','','/oss/oss/common/images//banner/under_banner_b.gif',1); snd.playSE( cSE_Forcus );" onmouseout="MM_swapImgRestore()" width="187" height="55" border="0">
    	</a>
    </div>
    <div id="underword" class="buttonTextBlackM buttonWord" align="center"></div>
</div>


<div id="giftline" style="display: none;">
  <div class="dot" id="line02">･･･････････････････････････････････････････････････････････････････････････</div>
  <div class="dot" id="line01">･･･････････････････････････････････････････････････････････････････････････</div>
  <div id="Wiipoint">
    <div class="buttonTextBlackM" align="center">Wii Points</div>
  </div>
  <div id="point">
    <div class="wiiPoint" align="center"><span id="giftcurrentBalance"></span></div>
  </div>
</div>

<div id="sdErrorDiv">
  <!--  -----------------------------------------------------  -->
<!--  Copyright 2005-2014 Acer Cloud Technology, Inc.        -->
<!--  All Rights Reserved.                                   -->
<!--                                                         -->
<!--  This software contains confidential information and    -->
<!--  trade secrets of Acer Cloud Technology, Inc.           -->
<!--  Use, disclosure or reproduction is prohibited without  -->
<!--  the prior express written permission of Acer Cloud     -->
<!--  Technology, Inc.                                       -->
<!--  -----------------------------------------------------  -->
<div class="warningRed" id="errorCodeText" style="display:none" align="left">
    Code d’erreur: <span id="errorCodePlaceholder"></span></div>

<div class="contentsRedM" id="errorText" style="display:none" align="left">
     <span id="errorTextPlaceholder"></span>
</div></div>

<div id="text01-01">
  <div class="titleBlackL" align="left"><span id="heading">Confirmation de téléchargement</span></div>
</div>


<div id="confirmframe">

<div id="goodsconfirmation"><img src="Confirmation%20de%20t%C3%A9l%C3%A9chargement_fichiers/goods_confirmation.gif" width="537" height="225"></div>
<div id="text03-01">
  <div class="catalogTitleBlack_01" align="center">
    <div align="right">Wii Points actuels:</div>
  </div>
</div>
<div id="text04-01">
  <div class="contentsRedM" align="center">
    <div align="right">Wii Points nécessaires:</div>
  </div>
</div>


<div id="MsgWithoutSD">
<div id="text06-01">
  <div class="catalogTitleBlack_01" align="center">
    <div align="right">Blocs libres:</div>
  </div>
</div>
<div id="text07-01">
  <div class="contentsRedM" align="center">
    <div align="right">
    	Blocs nécessaires (max.):</div>
  </div>
</div>
<div id="text08-01">
  <div class="catalogTitleBlack_01" align="center">
    <div align="right">
    	Libres après téléchargement (min.):</div>
  </div>
</div>
<div id="confirmation">
  <div align="center"><span class="headerBlueL" id="confirmationMsg"></span></div>
</div>
</div>

<div id="MsgWithSD" style="display: none;">
<div id="text06-01">
  <div class="catalogTitleBlack_01" align="center">
    <div align="right">Blocs libres sur la carte SD:</div>
  </div>
</div>
<div id="text07-01">
  <div class="contentsRedM" align="center">
    <div align="right">
    	Blocs nécessaires (max.):</div>
  </div>
</div>
<div id="text08-01">
  <div class="catalogTitleBlack_01" align="center">
    <div align="right">
    	Libres après téléchargement (min.):</div>
  </div>
</div>
<div id="confirmation">
  <div align="center"><span class="headerBlueL" id="confirmationMsgWithSD"></span></div>
</div>
</div>


<div id="text05-01">
  <div class="catalogTitleBlack_01" align="center">
    <div align="right">Solde après téléchargement:</div>
  </div>
</div>
<div id="pointcost01">
  <div class="catalogTitleBlack_01" align="right"></div>
</div>
<div id="pointword02">
  <div class="contentsRedM" align="right"></div>
</div>
<div id="pointword03">
  <div class="catalogTitleBlack_01" align="right"></div>
</div>
<div id="blockcost02">
  <div class="contentsRedM" align="right"></div>
</div>
<div id="blockcost01">
  <div class="catalogTitleBlack_01" align="right"></div>
</div>
<div id="blockcost03">
  <div class="catalogTitleBlack_01" align="right"></div>
</div>
<div id="pointword01">
  <div align="center">
    <div class="catalogTitleBlack_01" align="center">points</div>
  </div>
</div>
<div id="points02">
  <div align="center">
    <div class="contentsRedM" align="center">points</div>
  </div>
</div>
<div id="pointos03">
  <div align="center">
    <div class="catalogTitleBlack_01" align="center">points</div>
  </div>
</div>
<div id="blockword01">
  <div class="catalogTitleBlack_01" align="center">blocs</div>
</div>
<div id="blockword02">
  <div class="contentsRedM" align="center">blocs</div>
</div>
<div id="blockword03">
  <div class="catalogTitleBlack_01" align="center">blocs</div>
</div>
<div id="text02-01">
  <div align="center">
    <div id="BuyMsg" class="buttonTextWhiteS_01" align="left">
      Le téléchargement de ce titre nécessite 0 Wii Points ainsi que 0 blocs libres dans la mémoire de la console Wii.</div>
  </div>
</div>
<div style="overflow:hidden" nowrap="" id="TitleName1stline">
  <div class="contentsBlueM" align="center"></div>
</div>
</div>


<!--  -----------------------------------------------------  -->
<!--  Copyright 2005-2014 Acer Cloud Technology, Inc.        -->
<!--  All Rights Reserved.                                   -->
<!--                                                         -->
<!--  This software contains confidential information and    -->
<!--  trade secrets of Acer Cloud Technology, Inc.           -->
<!--  Use, disclosure or reproduction is prohibited without  -->
<!--  the prior express written permission of Acer Cloud     -->
<!--  Technology, Inc.                                       -->
<!--  -----------------------------------------------------  -->
<div id="sdErrorNoSizeDiv" style="position:absolute; left:36px; top:88px; width:540px; height:179px; z-index:37; display:none">
  <div align="center">
    <div class="contentsBlackM" align="center"><table height="100%"><tbody><tr><td valign="middle" align="left"><span id="sdErrorNoSizeDivMsg"></span></td></tr></tbody></table></div>
  </div>
</div>


<div id="sdbuttons" style="display:none">
  <div id="selectionMessage">
      <div style="display:table; height:100%" class="h_block_middle">
        <div class="tcell v_middle_h_inline_left">
          <span id="reasonText" class="buttonTextBlackM">
            Sélectionnez la destination.</span>
        </div>
      </div>
  </div>

  <div id="nandDLButton">
    <div id="banner01">
      <img src="Confirmation%20de%20t%C3%A9l%C3%A9chargement_fichiers/sdToNAND_a.png" id="Image01">
    </div>
    <div id="text01" style="display:table">
      <div class="tcell vh_inline_middle">
        <span class="catalogTitleBlack">
          Mémoire de la console Wii</span>
      </div>
    </div>
    <div id="spacer01">
      <a id="NANDAnchor" href="javascript:onNANDButtonPressed('', '', redownloadFlagExt)">
        <img src="Confirmation%20de%20t%C3%A9l%C3%A9chargement_fichiers/spacer.gif" name="Image01s" id="Image01s" onmouseover="MM_swapImage('Image01','','/oss/oss/common/images//banner/sdToNAND_b.png',1);snd.playSE( cSE_Forcus );" onmouseout="MM_swapImgRestore()" onclick="snd.playSE(cSE_Decide);" width="236" height="184" border="0">
      </a>
    </div>
  </div>



  <div id="sdDLButton">
    <div id="banner02">
      <img src="Confirmation%20de%20t%C3%A9l%C3%A9chargement_fichiers/sdToSD_a.png" id="Image02">
    </div>
    <div id="text02" style="display:table">
      <div class="tcell vh_inline_middle">
        <span class="catalogTitleBlack">
          Carte SD</span>
      </div>
    </div>
    <div id="spacer02">
      <a id="SDAnchor" href="javascript:onSDButtonPressed('', '', redownloadFlagExt)">
        <img src="Confirmation%20de%20t%C3%A9l%C3%A9chargement_fichiers/spacer.gif" name="Image02s" id="Image02s" onmouseover="MM_swapImage('Image02','','/oss/oss/common/images//banner/sdToSD_b.png',1);snd.playSE( cSE_Forcus );" onmouseout="MM_swapImgRestore()" onclick="snd.playSE(cSE_Decide);" width="236" height="184" border="0">
      </a>
    </div>
    <img id="sdDisable" style="display: none;" src="Confirmation%20de%20t%C3%A9l%C3%A9chargement_fichiers/point_gray.png" border="0">
  </div>


  <div id="SD_Error_Debug" style="display: none;">
    <select onchange="sderrordebugvalue.value=this.value;">
      <option value="" selected="selected">None</option>
      <option value="-0">SDCARD_ERROR_OK                     =  0</option>
      <option value="-1">SDCARD_ERROR_NOT_INSERTED           = -1</option>
      <option value="-2">SDCARD_ERROR_CORRUPT                = -2</option>
      <option value="-3">SDCARD_ERROR_NOT_SUPPORTED          = -3</option>
      <option value="-4">SDCARD_ERROR_WRITE_PROTECTED        = -4</option>
      <option value="-5">SDCARD_ERROR_WANT_OF_CAPACITY       = -5</option>
      <option value="-6">SDCARD_ERROR_EXIST_CHECK_SOFT       = -6</option>
      <option value="-7">SDCARD_ERROR_FAILED                 = -7</option>
      <option value="-8">SDCARD_ERROR_UNKNOWN                = -8</option>
      <option value="-9">SDCARD_ERROR_NO_SPACE               = -9</option>
      <option value="-10">SDCARD_ERROR_NOEXISTS              = -10</option>
      <option value="-11">B_05.sdError_EXIST_CHECK_SOFT_NAND = -11</option>
      <option value="-12">B_05.errChannel                    = -12</option>
      <option value="-13">B_05.errInodes                     = -13</option>
    </select><br><br><br>
    Value : <input type="text" name="sderrordebugvalue"><br><br>
    <input type="button" onclick="sderrordebugvalue2.value=checkValidSD(titleId, titleSizeKB); sderrordebugvalue3.value=titleId; sderrordebugvalue4.value=titleSizeKB; sderrordebugvalue5.value=titleSizeBlock; sderrordebugvalue6.value=titleSize; sderrordebugvalue7.value=ec.getDeviceInfo().freeChannelAppCount-getTitlesDownloaded();">checkValidSD
    <input type="button" onclick="sderrordebugvalue2.value=isInserted(); sderrordebugvalue3.value=''; sderrordebugvalue4.value=''; sderrordebugvalue5.value=''; sderrordebugvalue6.value=''; sderrordebugvalue7.value='';">isInserted
    <input type="button" onclick="sderrordebugvalue2.value=getFreeKBytes(); sderrordebugvalue3.value=''; sderrordebugvalue4.value=''; sderrordebugvalue5.value=''; sderrordebugvalue6.value=''; sderrordebugvalue7.value='';">getFreeKBytes
    <br>Value : <input type="text" name="sderrordebugvalue2">
        titleId : <input type="text" name="sderrordebugvalue3">
    <br>titleSizeKB : <input type="text" name="sderrordebugvalue4">
        titleSizeBlock : <input type="text" name="sderrordebugvalue5">
    <br>titleSize : <input type="text" name="sderrordebugvalue6">
        Free Ch : <input type="text" name="sderrordebugvalue7">
  </div>
</div>


</body></html>